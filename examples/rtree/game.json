{
  "firstLayout": "",
  "gdVersion": {
    "build": 99,
    "major": 4,
    "minor": 0,
    "revision": 0
  },
  "properties": {
    "adaptGameResolutionAtRuntime": true,
    "folderProject": false,
    "orientation": "landscape",
    "packageName": "com.example.gamename",
    "pixelsRounding": false,
    "projectUuid": "f5e2e5ef-42bf-401f-935e-8980c937c295",
    "scaleMode": "linear",
    "sizeOnStartupMode": "",
    "templateSlug": "",
    "useExternalSourceFiles": false,
    "version": "1.0.0",
    "name": "R-Tree",
    "description": "",
    "author": "",
    "windowWidth": 1280,
    "windowHeight": 720,
    "latestCompilationDirectory": "",
    "maxFPS": 60,
    "minFPS": 20,
    "verticalSync": false,
    "platformSpecificAssets": {},
    "loadingScreen": {
      "backgroundColor": 0,
      "backgroundFadeInDuration": 0.2,
      "backgroundImageResourceName": "",
      "gdevelopLogoStyle": "light",
      "logoAndProgressFadeInDuration": 0.2,
      "logoAndProgressLogoFadeInDelay": 0.2,
      "minDuration": 1.5,
      "progressBarColor": 16777215,
      "progressBarHeight": 20,
      "progressBarMaxWidth": 200,
      "progressBarMinWidth": 40,
      "progressBarWidthPercent": 30,
      "showGDevelopSplash": true,
      "showProgressBar": true
    },
    "authorIds": [],
    "categories": [],
    "playableDevices": [],
    "extensionProperties": [],
    "platforms": [
      {
        "name": "GDevelop JS platform"
      }
    ],
    "currentPlatform": "GDevelop JS platform"
  },
  "resources": {
    "resources": [
      {
        "alwaysLoaded": false,
        "file": "assets/Red playerShip (1).png",
        "kind": "image",
        "metadata": "",
        "name": "Red playerShip (1).png",
        "smoothed": true,
        "userAdded": false,
        "origin": {
          "identifier": "https://asset-resources.gdevelop.io/public-resources/Space Shooter/PNG/b331b3700315a046506f289a74e04b71f3decdd90eaddc6fefdb4af856a05d83_Red playerShip (1).png",
          "name": "Red playerShip (1).png"
        }
      },
      {
        "alwaysLoaded": false,
        "file": "assets/Big Brown Meteor (1).png",
        "kind": "image",
        "metadata": "",
        "name": "Big Brown Meteor (1).png",
        "smoothed": true,
        "userAdded": false,
        "origin": {
          "identifier": "https://asset-resources.gdevelop.io/public-resources/Space Shooter/PNG/Meteors/ae6802c87f6e3e4739b6260b23e4546582daad3fb803446401fbec2bc057f297_Big Brown Meteor (1).png",
          "name": "Big Brown Meteor (1).png"
        }
      },
      {
        "alwaysLoaded": false,
        "file": "assets/Big Grey Meteor (2).png",
        "kind": "image",
        "metadata": "",
        "name": "Big Grey Meteor (2).png",
        "smoothed": true,
        "userAdded": false,
        "origin": {
          "identifier": "https://asset-resources.gdevelop.io/public-resources/Space Shooter/PNG/Meteors/401dea3495a58458e490689209f4c600652397a44bfc31314e80d0af334173aa_Big Grey Meteor (2).png",
          "name": "Big Grey Meteor (2).png"
        }
      }
    ],
    "resourceFolders": []
  },
  "objects": [],
  "objectsGroups": [],
  "variables": [],
  "layouts": [
    {
      "b": 37,
      "disableInputWhenNotFocused": true,
      "mangledName": "Untitled_32scene2",
      "name": "Untitled scene2",
      "r": 37,
      "standardSortMethod": true,
      "stopSoundsOnStartup": true,
      "title": "",
      "v": 37,
      "uiSettings": {
        "grid": false,
        "gridType": "rectangular",
        "gridWidth": 32,
        "gridHeight": 32,
        "gridOffsetX": 0,
        "gridOffsetY": 0,
        "gridColor": 10401023,
        "gridAlpha": 0.8,
        "snap": false,
        "zoomFactor": 0.546875,
        "windowMask": false
      },
      "objectsGroups": [
        {
          "name": "Obstacle",
          "objects": [
            {
              "name": "BigBrownMeteor1"
            },
            {
              "name": "BigGreyMeteor2"
            }
          ]
        }
      ],
      "variables": [],
      "instances": [
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigBrownMeteor1",
          "persistentUuid": "f9c940ba-9f2e-4b8f-8333-a872187bf521",
          "width": 0,
          "x": 983,
          "y": 85,
          "zOrder": 2,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigBrownMeteor1",
          "persistentUuid": "1944b1e4-d9cc-4207-8108-202660699298",
          "width": 0,
          "x": 504,
          "y": 293,
          "zOrder": 3,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigBrownMeteor1",
          "persistentUuid": "ef6ae8ec-e101-48dc-83cd-80cd9339c82f",
          "width": 0,
          "x": 960,
          "y": 138,
          "zOrder": 4,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigBrownMeteor1",
          "persistentUuid": "29c24acd-7e01-4587-9e78-ec611f1f1f90",
          "width": 0,
          "x": 157,
          "y": 316,
          "zOrder": 5,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigBrownMeteor1",
          "persistentUuid": "20553e7b-6091-412f-99e3-744417a7a1f6",
          "width": 0,
          "x": 1040,
          "y": 121,
          "zOrder": 6,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigBrownMeteor1",
          "persistentUuid": "128cd2f9-0397-44ad-9d5d-7ce7e37276c8",
          "width": 0,
          "x": 186,
          "y": 268,
          "zOrder": 7,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigBrownMeteor1",
          "persistentUuid": "517150aa-0fbf-4512-b563-c6f08042dba6",
          "width": 0,
          "x": 570,
          "y": 271,
          "zOrder": 8,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigGreyMeteor2",
          "persistentUuid": "a164943d-79ef-4648-bc7f-58e942730210",
          "width": 0,
          "x": 903,
          "y": 87,
          "zOrder": 9,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigGreyMeteor2",
          "persistentUuid": "13e04f7b-6347-4bcd-b6f5-99211f26821d",
          "width": 0,
          "x": 642,
          "y": 283,
          "zOrder": 10,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigGreyMeteor2",
          "persistentUuid": "33b31ac4-6bda-4013-b3cb-2749c5414f1b",
          "width": 0,
          "x": 550,
          "y": 327,
          "zOrder": 11,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        }
      ],
      "objects": [
        {
          "assetStoreId": "2b2dfbbe01d820384d341ecfa1cf553b2700019a4f78c1d6fc4c55cb4b373bf5",
          "name": "RedPlayerShip1",
          "tags": "",
          "type": "Sprite",
          "updateIfNotVisible": false,
          "variables": [],
          "effects": [],
          "behaviors": [],
          "animations": [
            {
              "name": "",
              "useMultipleDirections": false,
              "directions": [
                {
                  "looping": true,
                  "timeBetweenFrames": 0.025,
                  "sprites": [
                    {
                      "hasCustomCollisionMask": false,
                      "image": "Red playerShip (1).png",
                      "points": [],
                      "originPoint": {
                        "name": "origine",
                        "x": 0,
                        "y": 0
                      },
                      "centerPoint": {
                        "automatic": true,
                        "name": "centre",
                        "x": 0,
                        "y": 0
                      },
                      "customCollisionMask": []
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "assetStoreId": "911c6f50a4c05507c6fc1df967493f61a7ce9bad9e144cec92f6ff32be42749a",
          "name": "BigBrownMeteor1",
          "tags": "",
          "type": "Sprite",
          "updateIfNotVisible": false,
          "variables": [],
          "effects": [],
          "behaviors": [
            {
              "name": "Obstacle",
              "type": "CollisionDetector::Solid"
            }
          ],
          "animations": [
            {
              "name": "",
              "useMultipleDirections": false,
              "directions": [
                {
                  "looping": true,
                  "timeBetweenFrames": 0.025,
                  "sprites": [
                    {
                      "hasCustomCollisionMask": false,
                      "image": "Big Brown Meteor (1).png",
                      "points": [],
                      "originPoint": {
                        "name": "origine",
                        "x": 0,
                        "y": 0
                      },
                      "centerPoint": {
                        "automatic": true,
                        "name": "centre",
                        "x": 0,
                        "y": 0
                      },
                      "customCollisionMask": []
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "assetStoreId": "fe9de3e97f21ea1ff6d364d2efe3e7d379cb150152cc2461b10d1ed05f803d09",
          "name": "BigGreyMeteor2",
          "tags": "",
          "type": "Sprite",
          "updateIfNotVisible": false,
          "variables": [],
          "effects": [],
          "behaviors": [
            {
              "name": "Obstacle",
              "type": "CollisionDetector::Solid"
            }
          ],
          "animations": [
            {
              "name": "",
              "useMultipleDirections": false,
              "directions": [
                {
                  "looping": true,
                  "timeBetweenFrames": 0.025,
                  "sprites": [
                    {
                      "hasCustomCollisionMask": false,
                      "image": "Big Grey Meteor (2).png",
                      "points": [],
                      "originPoint": {
                        "name": "origine",
                        "x": 0,
                        "y": 0
                      },
                      "centerPoint": {
                        "automatic": true,
                        "name": "centre",
                        "x": 0,
                        "y": 0
                      },
                      "customCollisionMask": []
                    }
                  ]
                }
              ]
            }
          ]
        }
      ],
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "DepartScene"
              },
              "parameters": [
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "value": "CollisionDetector::Separate"
                  },
                  "parameters": [
                    "",
                    "Obstacle",
                    "Obstacle",
                    "Obstacle",
                    ""
                  ]
                }
              ]
            }
          ]
        }
      ],
      "layers": [
        {
          "ambientLightColorB": 0,
          "ambientLightColorG": 9943112,
          "ambientLightColorR": 16,
          "followBaseLayerCamera": false,
          "isLightingLayer": false,
          "name": "",
          "visibility": true,
          "cameras": [
            {
              "defaultSize": true,
              "defaultViewport": true,
              "height": 0,
              "viewportBottom": 1,
              "viewportLeft": 0,
              "viewportRight": 1,
              "viewportTop": 0,
              "width": 0
            }
          ],
          "effects": []
        }
      ],
      "behaviorsSharedData": [
        {
          "name": "Obstacle",
          "type": "CollisionDetector::Solid"
        }
      ]
    },
    {
      "b": 37,
      "disableInputWhenNotFocused": true,
      "mangledName": "Untitled_32scene",
      "name": "Untitled scene",
      "r": 37,
      "standardSortMethod": true,
      "stopSoundsOnStartup": true,
      "title": "",
      "v": 37,
      "uiSettings": {
        "grid": false,
        "gridType": "rectangular",
        "gridWidth": 32,
        "gridHeight": 32,
        "gridOffsetX": 0,
        "gridOffsetY": 0,
        "gridColor": 10401023,
        "gridAlpha": 0.8,
        "snap": false,
        "zoomFactor": 0.546875,
        "windowMask": false
      },
      "objectsGroups": [
        {
          "name": "Obstacle",
          "objects": [
            {
              "name": "BigBrownMeteor1"
            },
            {
              "name": "BigGreyMeteor2"
            }
          ]
        }
      ],
      "variables": [],
      "instances": [
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "RedPlayerShip1",
          "persistentUuid": "9ff2bb0e-b2eb-4b93-81af-c0444469469c",
          "width": 0,
          "x": 485,
          "y": 369,
          "zOrder": 1,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigBrownMeteor1",
          "persistentUuid": "f9c940ba-9f2e-4b8f-8333-a872187bf521",
          "width": 0,
          "x": 983,
          "y": 85,
          "zOrder": 2,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigBrownMeteor1",
          "persistentUuid": "1944b1e4-d9cc-4207-8108-202660699298",
          "width": 0,
          "x": 413,
          "y": 149,
          "zOrder": 3,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigBrownMeteor1",
          "persistentUuid": "ef6ae8ec-e101-48dc-83cd-80cd9339c82f",
          "width": 0,
          "x": 691,
          "y": 515,
          "zOrder": 4,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigBrownMeteor1",
          "persistentUuid": "29c24acd-7e01-4587-9e78-ec611f1f1f90",
          "width": 0,
          "x": 115,
          "y": 524,
          "zOrder": 5,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigBrownMeteor1",
          "persistentUuid": "20553e7b-6091-412f-99e3-744417a7a1f6",
          "width": 0,
          "x": 1073,
          "y": 494,
          "zOrder": 6,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigBrownMeteor1",
          "persistentUuid": "128cd2f9-0397-44ad-9d5d-7ce7e37276c8",
          "width": 0,
          "x": 186,
          "y": 268,
          "zOrder": 7,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigBrownMeteor1",
          "persistentUuid": "517150aa-0fbf-4512-b563-c6f08042dba6",
          "width": 0,
          "x": 685,
          "y": 211,
          "zOrder": 8,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigGreyMeteor2",
          "persistentUuid": "a164943d-79ef-4648-bc7f-58e942730210",
          "width": 0,
          "x": 166,
          "y": 111,
          "zOrder": 9,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigGreyMeteor2",
          "persistentUuid": "13e04f7b-6347-4bcd-b6f5-99211f26821d",
          "width": 0,
          "x": 903,
          "y": 292,
          "zOrder": 10,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        },
        {
          "angle": 0,
          "customSize": false,
          "height": 0,
          "layer": "",
          "name": "BigGreyMeteor2",
          "persistentUuid": "33b31ac4-6bda-4013-b3cb-2749c5414f1b",
          "width": 0,
          "x": 404,
          "y": 574,
          "zOrder": 11,
          "numberProperties": [],
          "stringProperties": [],
          "initialVariables": []
        }
      ],
      "objects": [
        {
          "assetStoreId": "2b2dfbbe01d820384d341ecfa1cf553b2700019a4f78c1d6fc4c55cb4b373bf5",
          "name": "RedPlayerShip1",
          "tags": "",
          "type": "Sprite",
          "updateIfNotVisible": false,
          "variables": [],
          "effects": [],
          "behaviors": [],
          "animations": [
            {
              "name": "",
              "useMultipleDirections": false,
              "directions": [
                {
                  "looping": true,
                  "timeBetweenFrames": 0.025,
                  "sprites": [
                    {
                      "hasCustomCollisionMask": false,
                      "image": "Red playerShip (1).png",
                      "points": [],
                      "originPoint": {
                        "name": "origine",
                        "x": 0,
                        "y": 0
                      },
                      "centerPoint": {
                        "automatic": true,
                        "name": "centre",
                        "x": 0,
                        "y": 0
                      },
                      "customCollisionMask": []
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "assetStoreId": "911c6f50a4c05507c6fc1df967493f61a7ce9bad9e144cec92f6ff32be42749a",
          "name": "BigBrownMeteor1",
          "tags": "",
          "type": "Sprite",
          "updateIfNotVisible": false,
          "variables": [],
          "effects": [],
          "behaviors": [
            {
              "name": "Obstacle",
              "type": "CollisionDetector::Solid"
            }
          ],
          "animations": [
            {
              "name": "",
              "useMultipleDirections": false,
              "directions": [
                {
                  "looping": true,
                  "timeBetweenFrames": 0.025,
                  "sprites": [
                    {
                      "hasCustomCollisionMask": false,
                      "image": "Big Brown Meteor (1).png",
                      "points": [],
                      "originPoint": {
                        "name": "origine",
                        "x": 0,
                        "y": 0
                      },
                      "centerPoint": {
                        "automatic": true,
                        "name": "centre",
                        "x": 0,
                        "y": 0
                      },
                      "customCollisionMask": []
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "assetStoreId": "fe9de3e97f21ea1ff6d364d2efe3e7d379cb150152cc2461b10d1ed05f803d09",
          "name": "BigGreyMeteor2",
          "tags": "",
          "type": "Sprite",
          "updateIfNotVisible": false,
          "variables": [],
          "effects": [],
          "behaviors": [
            {
              "name": "Obstacle",
              "type": "CollisionDetector::Solid"
            }
          ],
          "animations": [
            {
              "name": "",
              "useMultipleDirections": false,
              "directions": [
                {
                  "looping": true,
                  "timeBetweenFrames": 0.025,
                  "sprites": [
                    {
                      "hasCustomCollisionMask": false,
                      "image": "Big Grey Meteor (2).png",
                      "points": [],
                      "originPoint": {
                        "name": "origine",
                        "x": 0,
                        "y": 0
                      },
                      "centerPoint": {
                        "automatic": true,
                        "name": "centre",
                        "x": 0,
                        "y": 0
                      },
                      "customCollisionMask": []
                    }
                  ]
                }
              ]
            }
          ]
        }
      ],
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "DepartScene"
              },
              "parameters": [
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "CollisionDetector::IsAroundRectangle"
                  },
                  "parameters": [
                    "",
                    "Obstacle",
                    "Obstacle",
                    "640",
                    "0",
                    "1280",
                    "720",
                    ""
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "DebuggerTools::ConsoleLog"
                  },
                  "parameters": [
                    "\"Brown: \" + ToString(PickedInstancesCount(BigBrownMeteor1))",
                    "",
                    ""
                  ]
                },
                {
                  "type": {
                    "value": "DebuggerTools::ConsoleLog"
                  },
                  "parameters": [
                    "\"Grey: \" + ToString(PickedInstancesCount(BigGreyMeteor2))",
                    "",
                    ""
                  ]
                }
              ]
            }
          ]
        }
      ],
      "layers": [
        {
          "ambientLightColorB": 0,
          "ambientLightColorG": 9943112,
          "ambientLightColorR": 16,
          "followBaseLayerCamera": false,
          "isLightingLayer": false,
          "name": "",
          "visibility": true,
          "cameras": [
            {
              "defaultSize": true,
              "defaultViewport": true,
              "height": 0,
              "viewportBottom": 1,
              "viewportLeft": 0,
              "viewportRight": 1,
              "viewportTop": 0,
              "width": 0
            }
          ],
          "effects": []
        }
      ],
      "behaviorsSharedData": [
        {
          "name": "Obstacle",
          "type": "CollisionDetector::Solid"
        }
      ]
    }
  ],
  "externalEvents": [],
  "eventsFunctionsExtensions": [
    {
      "author": "",
      "category": "Movement",
      "extensionNamespace": "",
      "fullName": "Collision detector",
      "helpPath": "",
      "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0ibWRpLXNldC1ub25lIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTksNUE3LDcgMCAwLDAgMiwxMkE3LDcgMCAwLDAgOSwxOUMxMC4wNCwxOSAxMS4wNiwxOC43NiAxMiwxOC4zMkMxMi45NCwxOC43NiAxMy45NiwxOSAxNSwxOUE3LDcgMCAwLDAgMjIsMTJBNyw3IDAgMCwwIDE1LDVDMTMuOTYsNSAxMi45NCw1LjI0IDEyLDUuNjhDMTEuMDYsNS4yNCAxMC4wNCw1IDksNU05LDdDOS4zNCw3IDkuNjcsNy4wMyAxMCw3LjFDOC43Miw4LjQxIDgsMTAuMTcgOCwxMkM4LDEzLjgzIDguNzIsMTUuNTkgMTAsMTYuODlDOS42NywxNi45NiA5LjM0LDE3IDksMTdBNSw1IDAgMCwxIDQsMTJBNSw1IDAgMCwxIDksN00xNSw3QTUsNSAwIDAsMSAyMCwxMkE1LDUgMCAwLDEgMTUsMTdDMTQuNjYsMTcgMTQuMzMsMTYuOTcgMTQsMTYuOUMxNS4yOCwxNS41OSAxNiwxMy44MyAxNiwxMkMxNiwxMC4xNyAxNS4yOCw4LjQxIDE0LDcuMTFDMTQuMzMsNy4wNCAxNC42Niw3IDE1LDdNMTIsOEMxMy4yNiw4Ljk1IDE0LDEwLjQzIDE0LDEyQzE0LDEzLjU3IDEzLjI2LDE1LjA1IDEyLDE2QzEwLjc0LDE1LjA1IDEwLDEzLjU3IDEwLDEyQzEwLDEwLjQzIDEwLjc0LDguOTUgMTIsOFoiIC8+PC9zdmc+",
      "name": "CollisionDetector",
      "previewIconUrl": "https://asset-resources.gdevelop.io/public-resources/Icons/f0512bd0e942826426e57926e62a6354b2d01670b5f3bdb086b1fb62b060c607_set-none.svg",
      "shortDescription": "",
      "version": "0.1.0",
      "description": "",
      "origin": {
        "identifier": "BoidsMovement",
        "name": "gdevelop-extension-store"
      },
      "tags": [
        "collision",
        "obstacle",
        "solid",
        "r-tree"
      ],
      "authorIds": [
        "IWykYNRvhCZBN3vEgKEbBPOR3Oc2"
      ],
      "dependencies": [],
      "eventsFunctions": [
        {
          "description": "Declare JavaScript library.",
          "fullName": "Declare JavaScript library",
          "functionType": "Action",
          "name": "DeclareJavaScriptLibrary",
          "private": true,
          "sentence": "Declare JavaScript library",
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": true,
                    "value": "CollisionDetector::IsJavaScriptLibraryDeclared"
                  },
                  "parameters": [
                    "",
                    ""
                  ]
                }
              ],
              "actions": [],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "gdjs.__collisionDetectorExtension = gdjs.__collisionDetectorExtension || {};",
                    "",
                    "/**",
                    " * ",
                    " */",
                    "gdjs.__collisionDetectorExtension.SolidManager =  /** @class */ (function () {",
                    "  /**",
                    "   * Create a manager.",
                    "   */",
                    "  function SolidManager() {",
                    "    this.rBushes = new Map();",
                    "  }",
                    "",
                    "  /**",
                    "   * Add a boid to the R-Tree.",
                    "   * @param {gdjs.RuntimeBehavior} behavior",
                    "   */",
                    "  SolidManager.prototype.add = function (behavior) {",
                    "    if (behavior.currentRBushAABB) {",
                    "      behavior.currentRBushAABB.updateAABBFromOwner();",
                    "    }",
                    "    else {",
                    "      behavior.currentRBushAABB = new gdjs.BehaviorRBushAABB(",
                    "        behavior",
                    "      );",
                    "    }",
                    "    const rBush = this.getRBush(behavior.owner.getName());",
                    "    rBush.insert(behavior.currentRBushAABB);",
                    "  }",
                    "",
                    "  /**",
                    "   * Remove a boid from the R-Tree.",
                    "   * @param {gdjs.RuntimeBehavior} behavior",
                    "   */",
                    "  SolidManager.prototype.remove = function (behavior) {",
                    "    const rBush = this.getRBush(behavior.owner.getName());",
                    "    rBush.remove(behavior.currentRBushAABB);",
                    "  }",
                    "",
                    "  SolidManager.prototype.getRBush = function (objectName) {",
                    "    let rBush = this.rBushes.get(objectName);",
                    "    if (!rBush) {",
                    "      rBush = new rbush();",
                    "      this.rBushes.set(objectName, rBush);",
                    "    }",
                    "    return rBush;",
                    "  }",
                    "",
                    "  /**",
                    "   * Returns all the instances around the specified area.",
                    "   * @param {string} objectName",
                    "   * @param {number} left",
                    "   * @param {number} top",
                    "   * @param {number} right",
                    "   * @param {number} bottom",
                    "   * @param {gdjs.RuntimeObject[]} results",
                    "   * @return {gdjs.RuntimeObject[]} An array with all boids near the object.",
                    "   */",
                    "  SolidManager.prototype.getAllInstancesInRectangle = function (objectName, left, top, right, bottom, results) {",
                    "    const searchArea = gdjs.staticObject(",
                    "      gdjs.__collisionDetectorExtension.SolidManager.prototype.getAllInstancesInRectangle",
                    "    );",
                    "    searchArea.minX = left;",
                    "    searchArea.minY = top;",
                    "    searchArea.maxX = right;",
                    "    searchArea.maxY = bottom;",
                    "    const rBush = this.getRBush(objectName);",
                    "    // TODO The R-Tree should not allocate an array.",
                    "    const nearbys = rBush.search(searchArea);",
                    "    results.length = 0;",
                    "    nearbys.forEach(nearby => results.push(nearby.behavior.owner));",
                    "    return results;",
                    "  }",
                    "",
                    "  return SolidManager;",
                    "}());",
                    ""
                  ],
                  "parameterObjects": "",
                  "useStrict": true,
                  "eventsSheetExpanded": true
                }
              ]
            }
          ],
          "parameters": [],
          "objectGroups": []
        },
        {
          "description": "Check if JavaScript library is declared.",
          "fullName": "JavaScript library declared",
          "functionType": "Condition",
          "name": "IsJavaScriptLibraryDeclared",
          "private": true,
          "sentence": "JavaScript library is declared",
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "eventsFunctionContext.returnValue = !!gdjs.__collisionDetectorExtension;",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ],
          "parameters": [],
          "objectGroups": []
        },
        {
          "description": "Check if obstacles are around a rectanglular area.",
          "fullName": "Is around rectangle",
          "functionType": "Condition",
          "name": "IsAroundRectangle",
          "sentence": "_PARAM1_ is around a rectangle (left: _PARAM3_, top: _PARAM4_, right: _PARAM5_, bottom: _PARAM6_)",
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "\r",
                "runtimeScene.__collisionDetectorExtension = runtimeScene.__collisionDetectorExtension || {};\r",
                "runtimeScene.__collisionDetectorExtension.solidManager =\r",
                "    runtimeScene.__collisionDetectorExtension.solidManager || new gdjs.__collisionDetectorExtension.SolidManager();\r",
                "const manager = runtimeScene.__collisionDetectorExtension.solidManager;\r",
                "\r",
                "const objectsLists = eventsFunctionContext.getObjectsLists(\"Object\");\r",
                "\r",
                "const left = eventsFunctionContext.getArgument(\"Left\");\r",
                "const top = eventsFunctionContext.getArgument(\"Top\");\r",
                "const right = eventsFunctionContext.getArgument(\"Right\");\r",
                "const bottom = eventsFunctionContext.getArgument(\"Bottom\");\r",
                "\r",
                "for (const objectName in objectsLists.items) {\r",
                "    const objects = objectsLists.items[objectName];\r",
                "    manager.getAllInstancesInRectangle(objectName, left, top, right, bottom, objects);\r",
                "}\r",
                "eventsFunctionContext.returnValue = true;"
              ],
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "type": "objectList"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "CollisionDetector::Solid",
              "type": "behavior"
            },
            {
              "description": "Left bound",
              "name": "Left",
              "type": "expression"
            },
            {
              "description": "Top bound",
              "name": "Top",
              "type": "expression"
            },
            {
              "description": "Right bound",
              "name": "Right",
              "type": "expression"
            },
            {
              "description": "Bottom bound",
              "name": "Bottom",
              "type": "expression"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Move an object away from another using collision masks.",
          "fullName": "Separate objects",
          "functionType": "Action",
          "name": "Separate",
          "sentence": "Move _PARAM1_ away from _PARAM2_ (only _PARAM1_ move)",
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "\r",
                "runtimeScene.__collisionDetectorExtension = runtimeScene.__collisionDetectorExtension || {};\r",
                "runtimeScene.__collisionDetectorExtension.solidManager =\r",
                "    runtimeScene.__collisionDetectorExtension.solidManager || new gdjs.__collisionDetectorExtension.SolidManager();\r",
                "const manager = runtimeScene.__collisionDetectorExtension.solidManager;\r",
                "\r",
                "const objects = eventsFunctionContext.getObjects(\"Object\");\r",
                "const solidObjectLists = eventsFunctionContext.getObjectsLists(\"SolidObject\");\r",
                "\r",
                "const nearObjects = []\r",
                "for (const object of objects) {\r",
                "    const left = object.getAABBLeft();\r",
                "    const top = object.getAABBTop();\r",
                "    const right = object.getAABBRight();\r",
                "    const bottom = object.getAABBBottom();\r",
                "    for (const objectName in solidObjectLists.items) {\r",
                "        // Solid picking is ignored all solid are considered.\r",
                "        nearObjects.length = 0;\r",
                "        manager.getAllInstancesInRectangle(objectName, left, top, right, bottom, nearObjects);\r",
                "        object.separateFromObjects(nearObjects);\r",
                "    }\r",
                "}"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "description": "Object",
              "name": "Object",
              "type": "objectList"
            },
            {
              "description": "Object (won't move)",
              "name": "SolidObject",
              "type": "objectList"
            },
            {
              "description": "Behavior",
              "name": "Behavior",
              "supplementaryInformation": "CollisionDetector::Solid",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        }
      ],
      "eventsBasedBehaviors": [
        {
          "description": "Can be serched efficiently.",
          "fullName": "Solid",
          "name": "Solid",
          "objectType": "",
          "eventsFunctions": [
            {
              "fullName": "",
              "functionType": "Action",
              "name": "onCreated",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "CollisionDetector::DeclareJavaScriptLibrary"
                      },
                      "parameters": [
                        "",
                        ""
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "runtimeScene.__collisionDetectorExtension = runtimeScene.__collisionDetectorExtension || {};",
                    "runtimeScene.__collisionDetectorExtension.solidManager =",
                    "    runtimeScene.__collisionDetectorExtension.solidManager || new gdjs.__collisionDetectorExtension.SolidManager();"
                  ],
                  "parameterObjects": "",
                  "useStrict": true,
                  "eventsSheetExpanded": false
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "CollisionDetector::Solid::AddToTree"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        ""
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "CollisionDetector::Solid",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "fullName": "",
              "functionType": "Action",
              "name": "onActivate",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "CollisionDetector::Solid::AddToTree"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        ""
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "CollisionDetector::Solid",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "fullName": "",
              "functionType": "Action",
              "name": "onDeActivate",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "CollisionDetector::Solid::RemoveFromTree"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        ""
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "CollisionDetector::Solid",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "fullName": "",
              "functionType": "Action",
              "name": "onDestroy",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "CollisionDetector::Solid::RemoveFromTree"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        ""
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "CollisionDetector::Solid",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "fullName": "",
              "functionType": "Action",
              "name": "doStepPreEvents",
              "sentence": "",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Or"
                      },
                      "parameters": [],
                      "subInstructions": [
                        {
                          "type": {
                            "value": "CollisionDetector::Solid::PropertyPreviousX"
                          },
                          "parameters": [
                            "Object",
                            "Behavior",
                            "!=",
                            "Object.X()"
                          ]
                        },
                        {
                          "type": {
                            "value": "CollisionDetector::Solid::PropertyPreviousY"
                          },
                          "parameters": [
                            "Object",
                            "Behavior",
                            "!=",
                            "Object.Y()"
                          ]
                        },
                        {
                          "type": {
                            "value": "CollisionDetector::Solid::PropertyPreviousWidth"
                          },
                          "parameters": [
                            "Object",
                            "Behavior",
                            "!=",
                            "Object.Width()"
                          ]
                        },
                        {
                          "type": {
                            "value": "CollisionDetector::Solid::PropertyPreviousHeight"
                          },
                          "parameters": [
                            "Object",
                            "Behavior",
                            "!=",
                            "Object.Height()"
                          ]
                        },
                        {
                          "type": {
                            "value": "CollisionDetector::Solid::PropertyPreviousAngle"
                          },
                          "parameters": [
                            "Object",
                            "Behavior",
                            "!=",
                            "Object.Angle()"
                          ]
                        }
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "CollisionDetector::Solid::UpdateInTree"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "CollisionDetector::Solid::SetPropertyPreviousX"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.X()"
                      ]
                    },
                    {
                      "type": {
                        "value": "CollisionDetector::Solid::SetPropertyPreviousY"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.Y()"
                      ]
                    },
                    {
                      "type": {
                        "value": "CollisionDetector::Solid::SetPropertyPreviousWidth"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.Width()"
                      ]
                    },
                    {
                      "type": {
                        "value": "CollisionDetector::Solid::SetPropertyPreviousHeight"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.Height()"
                      ]
                    },
                    {
                      "type": {
                        "value": "CollisionDetector::Solid::SetPropertyPreviousAngle"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "=",
                        "Object.Angle()"
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "CollisionDetector::Solid",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Update the object position in the tree",
              "fullName": "Update in the tree",
              "functionType": "Action",
              "name": "UpdateInTree",
              "private": true,
              "sentence": "Update _PARAM0_ in the tree",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "CollisionDetector::Solid::RemoveFromTree"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "CollisionDetector::Solid::AddToTree"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        ""
                      ]
                    }
                  ]
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "CollisionDetector::Solid",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Add the object position in the tree",
              "fullName": "Add to the tree",
              "functionType": "Action",
              "name": "AddToTree",
              "private": true,
              "sentence": "Add _PARAM0_ to the tree",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const object = objects[0];\r",
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\r",
                    "const behavior = object.getBehavior(behaviorName);\r",
                    "\r",
                    "runtimeScene.__collisionDetectorExtension.solidManager.add(behavior);"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": false
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "CollisionDetector::Solid",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            },
            {
              "description": "Remove the object from the tree",
              "fullName": "Remove from the tree",
              "functionType": "Action",
              "name": "RemoveFromTree",
              "private": true,
              "sentence": "Remove _PARAM0_ from the tree",
              "events": [
                {
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": [
                    "const object = objects[0];\r",
                    "const behaviorName = eventsFunctionContext.getBehaviorName(\"Behavior\");\r",
                    "const behavior = object.getBehavior(behaviorName);\r",
                    "\r",
                    "runtimeScene.__collisionDetectorExtension.solidManager.remove(behavior);"
                  ],
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": false
                }
              ],
              "parameters": [
                {
                  "description": "Object",
                  "name": "Object",
                  "type": "object"
                },
                {
                  "description": "Behavior",
                  "name": "Behavior",
                  "supplementaryInformation": "CollisionDetector::Solid",
                  "type": "behavior"
                }
              ],
              "objectGroups": []
            }
          ],
          "propertyDescriptors": [
            {
              "value": "",
              "type": "Number",
              "label": "",
              "description": "",
              "group": "",
              "extraInformation": [],
              "hidden": true,
              "name": "PreviousX"
            },
            {
              "value": "",
              "type": "Number",
              "label": "",
              "description": "",
              "group": "",
              "extraInformation": [],
              "hidden": true,
              "name": "PreviousY"
            },
            {
              "value": "",
              "type": "Number",
              "label": "",
              "description": "",
              "group": "",
              "extraInformation": [],
              "hidden": true,
              "name": "PreviousWidth"
            },
            {
              "value": "",
              "type": "Number",
              "label": "",
              "description": "",
              "group": "",
              "extraInformation": [],
              "hidden": true,
              "name": "PreviousHeight"
            },
            {
              "value": "",
              "type": "Number",
              "label": "",
              "description": "",
              "group": "",
              "extraInformation": [],
              "hidden": true,
              "name": "PreviousAngle"
            }
          ],
          "sharedPropertyDescriptors": []
        }
      ],
      "eventsBasedObjects": []
    }
  ],
  "externalLayouts": [],
  "externalSourceFiles": []
}